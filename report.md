# MuJoCo MPC 汽车仪表盘

## 一、项目概述

### 1.1 作业背景

本项目基于 MuJoCo MPC 仿真框架，旨在实现一个汽车仪表盘可视化系统，通过实时获取车辆仿真数据并进行图形化展示，帮助理解车辆状态和控制算法。

### 1.2 实现目标

- 熟悉大型 C++ 项目结构及编译流程
- 掌握 MuJoCo 物理仿真引擎的基本使用
- 获取车辆实时仿真数据（速度、转速、油量、温度）
- 将数据通过 OpenGL 可视化展示为仪表盘
- 提升综合分析和工程实践能力

### 1.3 开发环境

- 操作系统: Ubuntu 22.04
- 编译器: GCC 11.3.3
- 构建工具: CMake 3.22.1
- 图形库: OpenGL、GLFW
- 仿真引擎: MuJoCo（含 MPC 模块）
- 其他依赖: Eigen、GLAD

## 二、技术方案

### 2.1 系统架构

- 系统架构图: 仿真引擎 -> 数据获取模块 -> 仪表盘渲染模块 -> HUD显示
- 模块划分:
  - 数据获取模块 (`dashboard_data.h`)：负责读取和处理仿真数据
  - 渲染模块 (`dashboard_render.h`)：负责 OpenGL 仪表盘绘制和界面刷新

### 2.2 数据流程

- 数据流程图: MuJoCo仿真数据 -> 数据封装 -> 仪表盘渲染 -> 显示
- 数据结构设计: 速度、转速、油量、温度等状态封装为统一数据结构，便于渲染模块调用

### 2.3 渲染方案

- 渲染流程: 初始化 OpenGL -> 设置 HUD 布局 -> 获取数据 -> 绘制速度表/转速表/数字信息 -> 刷新显示
- OpenGL使用: 利用 GLAD 加载函数，GLFW 创建窗口，绘制二维图形覆盖三维仿真场景

## 三、实现细节

### 3.1 场景创建

- MJCF文件设计: 定义车辆模型、环境元素及物理属性
- 场景截图: 可在报告中插入仿真画面截图

### 3.2 数据获取

- 关键代码: 从 MuJoCo 仿真 API 获取速度、转速、油量、温度
- 数据验证: 通过日志和数值对比验证数据准确性

### 3.3 仪表盘渲染

#### 3.3.1 速度表

- 实现思路: 将速度值映射到指针角度，动态刷新速度表
- 代码片段: `dashboard_render.h` 中速度表绘制函数
- 效果展示: 指针随车辆运动实时变化

#### 3.3.2 转速表

- 实现思路: 将发动机转速映射到指针旋转角度，显示发动机状态
- 代码片段: `dashboard_render.h` 中转速表绘制函数
- 效果展示: 指针随转速变化动态显示

### 3.4 进阶功能（如果有）

- 数字显示油量、温度等参数
- 小地图功能尚未实现

## 四、遇到的问题和解决方案

### 问题1: 数据读取不稳定

- **现象**: 仿真数据有短暂异常波动
- **原因**: 数据刷新频率与渲染线程不同步
- **解决**: 对数据进行滤波处理并统一刷新时序

### 问题2: OpenGL HUD 覆盖异常

- **现象**: 仪表盘部分指针显示异常
- **原因**: 投影矩阵设置不当，深度测试影响绘制顺序
- **解决**: 调整 HUD 绘制为正交投影并禁用深度测试

## 五、测试与结果

### 5.1 功能测试

- 测试用例: 车辆加速、减速、转弯、怠速等状态
- 测试结果: 仪表盘速度表、转速表和数字显示均能正确反映车辆状态

### 5.2 性能测试

- 帧率测试: 仿真与渲染保持稳定在60FPS以上
- 资源占用: CPU和GPU占用率在可接受范围

### 5.3 效果展示

- 截图

![image-20251226104205479](C:\Users\1\AppData\Roaming\Typora\typora-user-images\image-20251226104205479.png)

![1d52530a6064f00ac177e34a6bab0f1e](D:\新建文件夹\聊天记录\Tencent Files\3466570878\nt_qq\nt_data\Pic\2025-12\Ori\1d52530a6064f00ac177e34a6bab0f1e.png)

![1d52530a6064f00ac177e34a6bab0f1e](D:\新建文件夹\聊天记录\Tencent Files\3466570878\nt_qq\nt_data\Pic\2025-12\Ori\1d52530a6064f00ac177e34a6bab0f1e.png)



## 六、总结与展望

### 6.1 学习收获

- 熟悉 C++ 工程项目结构和编译流程
- 掌握 MuJoCo 仿真和数据获取方法
- 学会利用 OpenGL 进行实时数据可视化
- 提升分析问题和解决实际工程问题能力

### 6.2 不足之处

- 小地图功能未实现
- 仪表盘界面美观度和交互性有待优化

### 6.3 未来改进方向

- 完成小地图显示功能
- 增加更多车辆状态参数的可视化
- 优化界面布局和渲染性能，提高交互体验

## 七、参考资料

1. MuJoCo 官方文档
2. MuJoCo MPC 项目源码与说明文档
3. OpenGL 官方参考文档
4. GLFW 开发文档
5. 《C++ Primer》